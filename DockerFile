FROM python:3.13
FROM python:3.13-slim

# Use environment variables
ENV PORT=5000
ENV PYTHONUNBUFFERED=1

# Set working directory
WORKDIR /app

# Copy only requirements first to leverage Docker layer cache
COPY requirements.txt ./

# Upgrade pip and install dependencies without cache to keep image small
RUN python -m pip install --upgrade pip setuptools wheel \
	&& pip install --no-cache-dir -r requirements.txt

# Copy application code
COPY . .

# Informational: container will listen on this port
EXPOSE 5000

# Use exec form; ensure gunicorn is installed in requirements
# Adjust the module path if your Flask app object is located elsewhere
CMD ["gunicorn", "--workers", "4", "--bind", "0.0.0.0:5000", "main:app"]